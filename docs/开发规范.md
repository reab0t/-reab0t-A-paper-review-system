# 开发规范

## 1. 代码规范

### 1.1 Java代码规范
- 遵循 Google Java Style Guide
- 类名使用 PascalCase 命名法
- 方法名和变量名使用 camelCase 命名法
- 常量使用全大写，单词间用下划线分隔
- 包名全小写，使用点号分隔
- 代码缩进使用4个空格
- 每个类都必须有完整的JavaDoc注释

### 1.2 前端代码规范
- 遵循 Vue 3 官方风格指南
- 组件名使用 PascalCase 命名法
- Props 使用 camelCase 命名法
- 事件名使用 kebab-case 命名法
- CSS类名使用 BEM 命名规范
- 使用 TypeScript 编写代码
- 使用 ESLint + Prettier 进行代码格式化

### 1.3 数据库规范
- 表名使用小写字母，单词间用下划线分隔
- 主键统一使用 `id` 命名
- 必须包含 `created_time` 和 `updated_time` 字段
- 所有表必须有注释
- 所有字段必须有注释
- 禁止使用外键约束（在代码层面控制）
- 用 `tinyint` 代替 `boolean`

### 1.4 API接口规范
- 使用 RESTful 风格设计API
- URL使用小写字母，单词间用中划线分隔
- 版本号放在URL中，例如：/api/v1/users
- 统一响应格式：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {}
  }
  ```
- 统一错误码规范
- 接口文档使用 Swagger/Knife4j 编写

## 2. 项目结构规范

### 2.1 后端项目结构
```
src/main/java/com/paper/review/
├── config/           # 配置类
├── controller/       # 控制器
├── service/         # 服务接口
│   └── impl/        # 服务实现
├── repository/      # 数据访问层
├── entity/         # 实体类
├── dto/            # 数据传输对象
├── vo/             # 视图对象
├── constant/       # 常量定义
├── util/           # 工具类
└── exception/      # 异常类
```

### 2.2 前端项目结构
```
src/
├── api/            # API接口
├── assets/         # 静态资源
├── components/     # 公共组件
├── router/         # 路由配置
├── store/          # 状态管理
├── utils/          # 工具函数
├── views/          # 页面组件
└── types/          # 类型定义
```

## 3. Git提交规范

### 3.1 分支管理
- `main`: 主分支，用于生产环境
- `develop`: 开发分支
- `feature/*`: 功能分支
- `hotfix/*`: 紧急修复分支
- `release/*`: 发布分支

### 3.2 提交信息格式
```
<type>(<scope>): <subject>

<body>

<footer>
```

### 3.3 类型说明
- `feat`: 新功能
- `fix`: 修复Bug
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建或工具相关

### 3.4 示例
```
feat(user): 添加用户注册功能

- 实现用户注册接口
- 添加邮箱验证
- 添加密码加密

Closes #123
```

## 4. 安全规范

### 4.1 密码安全
- 使用 BCrypt 加密存储密码
- 密码长度至少8位
- 必须包含大小写字母和数字
- 定期要求用户修改密码

### 4.2 接口安全
- 使用 HTTPS 传输
- 实现接口幂等性
- 防止SQL注入
- 防止XSS攻击
- 实现请求频率限制
- 使用JWT进行身份认证

### 4.3 数据安全
- 敏感数据加密存储
- 实现数据访问权限控制
- 记录重要操作日志
- 定期数据备份
- 实现数据软删除

## 5. 测试规范

### 5.1 单元测试
- 测试覆盖率要求达到80%
- 每个公共方法都要有单元测试
- 测试用例要覆盖边界条件
- 使用 JUnit 5 编写测试
- 使用 Mockito 模拟依赖

### 5.2 接口测试
- 使用 Postman 或 JUnit 进行接口测试
- 测试所有请求方法
- 测试异常情况
- 验证响应格式
- 检查响应时间

### 5.3 前端测试
- 使用 Vitest 进行单元测试
- 使用 Cypress 进行E2E测试
- 测试组件渲染
- 测试用户交互
- 测试状态管理

## 6. 文档规范

### 6.1 代码注释
- 类注释：说明类的用途
- 方法注释：说明参数、返回值和异常
- 关键代码注释：说明实现逻辑
- 使用英文编写注释
- 注释要简洁明了

### 6.2 接口文档
- 使用 Swagger/Knife4j 生成接口文档
- 说明接口用途
- 详细描述请求参数
- 提供响应示例
- 说明错误码含义

### 6.3 README文档
- 项目介绍
- 环境要求
- 安装步骤
- 使用说明
- 开发指南
- 部署说明

## 7. 性能规范

### 7.1 后端性能
- 合理使用缓存
- 优化SQL查询
- 使用连接池
- 异步处理耗时操作
- 避免大事务
- 合理设置JVM参数

### 7.2 前端性能
- 路由懒加载
- 图片懒加载
- 合理使用缓存
- 压缩静态资源
- 减少HTTP请求
- 使用CDN加速

### 7.3 数据库性能
- 建立必要的索引
- 避免全表扫描
- 合理分页
- 定期优化表
- 监控慢查询
- 使用读写分离

## 8. 团队协作规范

### 8.1 代码审查职责
- **架构审查**：靳磊（组长）
  - 架构设计合理性
  - 技术选型适当性
  - 性能和扩展性
  - 微服务治理

- **前端审查**：傅依琳
  - Vue 3.0 最佳实践
  - TypeScript 类型定义
  - 组件设计规范
  - 性能优化方案
  - UI/UX 规范

- **后端审查**：赵湄灵、王誉晗
  - 代码质量和规范
  - 安全性审查
  - 数据库设计
  - API 设计
  - 单元测试覆盖

- **运维审查**：袁太仙
  - 部署配置
  - 监控方案
  - 日志规范
  - 性能指标

### 8.2 技术评审流程
1. **架构评审**
   - 主持人：靳磊
   - 参与者：全体成员
   - 评审内容：
     - 系统架构设计
     - 技术方案选型
     - 性能优化方案
     - 安全方案

2. **前端评审**
   - 主持人：傅依琳
   - 参与者：前端开发人员
   - 评审内容：
     - 组件设计
     - 状态管理
     - 路由设计
     - 性能优化

3. **后端评审**
   - 主持人：赵湄灵/王誉晗
   - 参与者：后端开发人员
   - 评审内容：
     - 接口设计
     - 数据模型
     - 业务逻辑
     - 安全措施

4. **运维评审**
   - 主持人：袁太仙
   - 参与者：全体成员
   - 评审内容：
     - 部署方案
     - 监控方案
     - 日志方案
     - 应急预案

### 8.3 文档维护职责

1. **架构文档**：靳磊
   - 系统架构图
   - 技术选型说明
   - 部署架构图
   - 性能测试报告

2. **前端文档**：傅依琳
   - 组件文档
   - 开发指南
   - UI组件库
   - 性能优化指南

3. **后端文档**：赵湄灵、王誉晗
   - API文档
   - 数据库设计
   - 业务流程
   - 安全规范

4. **运维文档**：袁太仙
   - 部署文档
   - 监控文档
   - 运维手册
   - 应急预案

### 8.4 代码提交规范

1. **前端代码**
```bash
# 组件开发
git commit -m "feat(ui): 添加论文评审组件"

# 样式修改
git commit -m "style(ui): 优化评审表单样式"

# Bug修复
git commit -m "fix(ui): 修复评分组件计算错误"
```

2. **后端代码**
```bash
# 功能开发
git commit -m "feat(api): 实现论文自动分配功能"

# 性能优化
git commit -m "perf(api): 优化论文查询性能"

# 安全修复
git commit -m "fix(security): 修复JWT token验证漏洞"
```

3. **运维代码**
```bash
# 配置更新
git commit -m "chore(deploy): 更新Docker配置"

# 监控相关
git commit -m "feat(monitor): 添加性能监控面板"

# 脚本更新
git commit -m "feat(script): 添加自动备份脚本"
```

### 8.5 版本发布职责

1. **版本规划**：靳磊
   - 制定版本计划
   - 确定功能范围
   - 协调团队资源
   - 把控项目进度

2. **功能验证**
   - 前端验证：傅依琳
   - 后端验证：赵湄灵、王誉晗
   - 集成测试：全体成员

3. **部署发布**：袁太仙
   - 准备部署计划
   - 执行部署操作
   - 监控系统状态
   - 处理紧急问题

4. **文档更新**：全体成员
   - 更新相关文档
   - 编写发布说明
   - 更新使用手册
   - 记录重要变更 